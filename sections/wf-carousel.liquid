<div class="wf-carousel-section">
  <div class="row">
    <div class="small-12 columns">
      
      {% if section.settings.title != blank %}
        <div class="wf-carousel-header">
          <h2 class="wf-carousel-title">{{ section.settings.title }}</h2>
          {% if section.settings.link_url != blank %}
            <a href="{{ section.settings.link_url }}" class="wf-carousel-link">{{ section.settings.link_text }}</a>
          {% endif %}
        </div>
      {% endif %}

    </div>
  </div>

  
 <div class="wf-carousel-wrapper">
    <div class="wf-carousel-track">
      {% for block in section.blocks %}
        <a href="{{ block.settings.link }}" class="wf-carousel-slide" {{ block.shopify_attributes }}>
          <div class="wf-carousel-img-wrap">
            
            {%- comment -%} BOTÓN DE CORAZÓN {%- endcomment -%}
            <button type="button" class="wf-carousel-heart" aria-label="Añadir a favoritos">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
            </button>

            {% if block.settings.image != blank %}
              <img class="lazyload" 
                   src="{{ block.settings.image | img_url: '400x533', crop: 'center' }}" 
                   data-src="{{ block.settings.image | img_url: '800x1066', crop: 'center' }}" 
                   alt="{{ block.settings.title | escape }}" 
                   loading="lazy">
            {% else %}
              {{ 'collection-1' | placeholder_svg_tag: 'placeholder-svg' }}
            {% endif %}
            
            <div class="wf-carousel-overlay">
              {% if block.settings.subtext != blank %}
                <span class="wf-carousel-subtext">{{ block.settings.subtext }}</span>
              {% endif %}
              {% if block.settings.title != blank %}
                <h3 class="wf-carousel-heading">{{ block.settings.title }}</h3>
              {% endif %}
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Carrusel WF",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Título de la sección",
      "default": "Compra por Categoría"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Texto del enlace",
      "default": "Ver todo"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Enlace superior"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Imagen / Categoría",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Imagen (Ideal 3:4)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Título principal",
          "default": "Nombre Categoría"
        },
        {
          "type": "text",
          "id": "subtext",
          "label": "Etiqueta superior (Opcional)",
          "default": "NUEVO"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Enlace de la tarjeta"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Carrusel WF",
      "category": "Custom",
      "blocks": [
        { "type": "slide" },
        { "type": "slide" },
        { "type": "slide" }
      ]
    }
  ]
}
{% endschema %}